# Slither Enhanced

Slither Enhanced æ˜¯é’ˆå¯¹ [Slither å®‰å…¨åˆ†æå·¥å…·](https://github.com/crytic/slither) çš„å¢å¼ºæ’ä»¶ï¼Œä¸“æ³¨äºæ”¹è¿›æ™ºèƒ½åˆçº¦å®‰å…¨åˆ†æèƒ½åŠ›ï¼Œç‰¹åˆ«æ˜¯é’ˆå¯¹DeFiåº”ç”¨çš„å®‰å…¨æ£€æŸ¥ã€‚

## ğŸ“¢ é¡¹ç›®çŠ¶æ€å£°æ˜

âš ï¸ **é‡è¦æç¤º**ï¼š
- æœ¬é¡¹ç›®æ˜¯ä¸ªäººçš„å°è¯•å¼€å‘çš„ä½œå“ï¼Œç›®å‰å¤„äº**æ—©æœŸå¼€å‘é˜¶æ®µ**
- ä»£ç å¯èƒ½å­˜åœ¨å¤šå¤„é—®é¢˜ï¼Œæ¶æ„å’ŒAPIå¯èƒ½ä¼šæœ‰é‡å¤§å˜æ›´
- **æš‚ä¸æ¥å—å¤–éƒ¨è´¡çŒ®æˆ–åä½œè¯·æ±‚**
- ä»…ä½œä¸ºä¸ªäººå­¦ä¹ å’Œç ”ç©¶çš„è®°å½•

## ä¸»è¦ç‰¹ç‚¹

- **åŒºé—´åˆ†æå¼•æ“**: å…ˆè¿›çš„æ•°å€¼è¾¹ç•Œåˆ†æï¼Œæé«˜æ•´æ•°æº¢å‡ºå’Œä¸‹æº¢æ£€æµ‹å‡†ç¡®æ€§
- **DeFiç‰¹å®šæ£€æµ‹å™¨**: ä¸“ä¸ºDeFiåè®®è®¾è®¡çš„æ¼æ´æ£€æµ‹å™¨
  - **é—ªç”µè´·å›è°ƒé£é™©æ£€æµ‹å™¨**: è¯†åˆ«é—ªç”µè´·å›è°ƒå‡½æ•°ä¸­çš„é£é™©æ¨¡å¼
  - **æ— ç•Œé—ªç”µè´·é£é™©æ£€æµ‹å™¨**: å‘ç°å¯èƒ½å¯¼è‡´æ— ç•Œé—ªç”µè´·é£é™©çš„è®¾è®¡ç¼ºé™·
  - **æœªæ£€æŸ¥ä½™é¢å˜æ›´æ£€æµ‹å™¨**: æ£€æµ‹ä»£å¸è½¬ç§»åæœªéªŒè¯ä½™é¢å˜æ›´çš„æƒ…å†µ
- **æ”¹è¿›çš„æŠ¥å‘Šè¾“å‡º**: å¢å¼ºå¯è¯»æ€§çš„ç»ˆç«¯è¾“å‡ºå’Œäº¤äº’å¼HTMLæŠ¥å‘Š

## å®‰è£…

### ä»æºç å®‰è£…

```bash

# å®‰è£…æ’ä»¶
pip install -e .
```

### ä¾èµ–é¡¹

- Python 3.8+
- Slither 0.9.0+


## æ¶æ„

```
slither_enhanced/
â”œâ”€â”€ docs/                     # æ–‡æ¡£
â”œâ”€â”€ scripts/                  # å®ç”¨è„šæœ¬
â”œâ”€â”€ src/                      # æºä»£ç 
â”‚   â”œâ”€â”€ python_module/        # æ¨¡å—æ ¸å¿ƒ
â”‚   â”‚   â”œâ”€â”€ detectors/        # è‡ªå®šä¹‰æ£€æµ‹å™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ FlashLoanCallback/      # é—ªç”µè´·å›è°ƒæ£€æµ‹å™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ UncheckedTokenBalanceChange/ # æœªæ£€æŸ¥ä½™é¢å˜æ›´æ£€æµ‹å™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ UnboundedFlashLoanRisk/      # æ— ç•Œé—ªç”µè´·é£é™©æ£€æµ‹å™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ IntervalViolationDetector/   # åŒºé—´è¿è§„æ£€æµ‹å™¨
â”‚   â”‚   â”‚   |â”€â”€ numerical_anomalies.py       # æ•°å€¼å¼‚å¸¸æ£€æµ‹å™¨
|   |   |   â””â”€â”€ ...                          # æ­£åœ¨ä¿®æ”¹è°ƒæ•´ä¸­
â”‚   â”‚   â””â”€â”€ interval_analysis/  # åŒºé—´åˆ†ææ¨¡å—
â”‚   â”œâ”€â”€ frontend/             # å‰ç«¯ç•Œé¢
â”‚   â”‚   â”œâ”€â”€ terminal/         # ç»ˆç«¯æŠ¥å‘Šå¯è§†åŒ–
â”‚   â”‚   â”œâ”€â”€ staticWeb/        # é™æ€HTMLæŠ¥å‘Šé¡µé¢
â”‚   â”‚   â””â”€â”€ web/              # Web UI
â”œâ”€â”€ test/                     # æµ‹è¯•ç”¨ä¾‹
â”‚   â”œâ”€â”€ TestContracts/        # æµ‹è¯•åˆçº¦
â”‚   â”œâ”€â”€ scripts/              # æµ‹è¯•è„šæœ¬
â”‚   â””â”€â”€ results/              # æµ‹è¯•ç»“æœ
â””â”€â”€ setup.py                  # å®‰è£…é…ç½®
```


## å¿«é€Ÿå¼€å§‹

### åŸºæœ¬ç”¨æ³•

Slither Enhanced å¯ä»¥åƒæ ‡å‡† Slither ä¸€æ ·ä½¿ç”¨ï¼Œä½†æä¾›äº†é¢å¤–çš„æ£€æµ‹å™¨å’Œåˆ†æèƒ½åŠ›:

```bash
# è¿è¡ŒåŸå§‹Slither
slither contract.sol

# ä»…ä½¿ç”¨ç‰¹å®šçš„å¢å¼ºæ£€æµ‹å™¨
slither contract.sol --detect flashloan-callback-risks

interval-analyze contract.sol
```

### æ£€æµ‹å™¨åˆ—è¡¨

Slither Enhancedæš‚æ—¶åŒ…å«ä»¥ä¸‹æ£€æµ‹å™¨:

- `flashloan-callback-risks`: æ£€æµ‹é—ªç”µè´·å›è°ƒå‡½æ•°ä¸­çš„é£é™©æ¨¡å¼
- `unbounded-flashloan-risk`: æ£€æµ‹å¯èƒ½å¯¼è‡´æ— ç•Œé—ªç”µè´·é£é™©çš„è®¾è®¡ç¼ºé™·
- `unchecked-balance-change`: æ£€æµ‹ä»£å¸è½¬ç§»åæœªéªŒè¯ä½™é¢å˜æ›´çš„æƒ…å†µ
- `interval-violation`: ä½¿ç”¨åŒºé—´åˆ†ææ£€æµ‹æ•´æ•°ç›¸å…³çš„å®‰å…¨é—®é¢˜
- `interval-numerical-anomalies`: æ£€æµ‹åŸºäºåŒºé—´åˆ†æçš„æ•°å€¼å¼‚å¸¸æƒ…å†µ

### åŒºé—´åˆ†æ

åŒºé—´åˆ†ææ˜¯Slither Enhancedçš„æ ¸å¿ƒåŠŸèƒ½ï¼Œå¯ç”¨äºç²¾ç¡®è¿½è¸ªæ™ºèƒ½åˆçº¦ä¸­å˜é‡çš„æ•°å€¼èŒƒå›´:

è¯¦ç»†ä¿¡æ¯è¯·å‚é˜… [åŒºé—´åˆ†æä½¿ç”¨è¯´æ˜](docs/INTERVAL_ANALYSIS.md)ã€‚

## æµ‹è¯•æ¡†æ¶

Slither Enhanced åŒ…å«å…¨é¢çš„æµ‹è¯•æ¡†æ¶ï¼Œç”¨äºè¯„ä¼°å’Œæ¯”è¾ƒå¢å¼ºç‰ˆä¸åŸå§‹Slitherçš„æ€§èƒ½ï¼š

è¯¦ç»†çš„æµ‹è¯•æ¡†æ¶è¯´æ˜è¯·å‚é˜… [æµ‹è¯•æ¡†æ¶æ–‡æ¡£](test/README.md)ã€‚


## ç¤ºä¾‹

```bash
# ç¤ºä¾‹1ï¼šæ£€æµ‹é—ªç”µè´·å›è°ƒé£é™©
slither contract.sol --detect flashloan-callback-risks

# ç¤ºä¾‹2ï¼šç»“åˆå¤šä¸ªæ£€æµ‹å™¨
slither contract.sol --detect flashloan-callback-risks,unbounded-flashloan-risk,unchecked-balance-change

# ç¤ºä¾‹3ï¼šç”Ÿæˆè¯¦ç»†æŠ¥å‘Š
slither contract.sol --json report.json --detect interval-violation,interval-numerical-anomalies 
```

## è´¡çŒ®

âš ï¸ **æ³¨æ„**ï¼šæœ¬é¡¹ç›®å¤„äºæ—©æœŸå¼€å‘é˜¶æ®µã€‚

ç›®å‰**ä¸æ¥å—**å¤–éƒ¨è´¡çŒ®ã€åä½œæˆ–åˆå¹¶è¯·æ±‚ã€‚æ­¤å­˜å‚¨åº“ä¸»è¦ç”¨äºè®°å½•ä¸ªäººå­¦ä¹ å’Œç ”ç©¶å·¥ä½œã€‚

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ [AGPL-3.0](LICENSE) è®¸å¯è¯ã€‚å®ƒæ˜¯åŸºäº [Slither](https://github.com/crytic/slither) (åŒæ ·é‡‡ç”¨AGPL-3.0) å¼€å‘çš„ã€‚æµ‹è¯•ä¸­ä½¿ç”¨çš„æ•°æ®é›†éƒ¨åˆ†æ¥æºäº [SmartBugs Curated Dataset](https://github.com/smartbugs/smartbugs-curated/tree/main)ï¼Œè¯¥æ•°æ®é›†é‡‡ç”¨MITè®¸å¯è¯ã€‚ 

### è‡´è°¢

ç‰¹åˆ«æ„Ÿè°¢[Slitheré¡¹ç›®](https://github.com/crytic/slither)å’Œå…¶ç»´æŠ¤è€…æä¾›çš„å‡ºè‰²å·¥å…·ï¼Œæœ¬é¡¹ç›®ä½œä¸ºå¯¹è¯¥å·¥å…·çš„æ‰©å±•å’Œå¢å¼ºå°è¯•ï¼Œéµå¾ªå…¶å¼€æºç²¾ç¥å’Œè§„èŒƒã€‚